{"version":3,"sources":["toto.js","index.js"],"names":["alert","giphyUrl","apikey","urlParams","URLSearchParams","window","location","search","urlParam","get","formElement","document","querySelector","gifDisplay","favoritedBtn","gifInfos","onload","pathname","favorited","searching","e","setAttribute","addEventListener","inputText","target","value","history","pushState","set","href","searchedText","url","fetch","then","response","json","data","length","firstChild","removeChild","i","imageDiv","createElement","image","imageModal","favButton","favText","createTextNode","linkButton","linkText","id","images","fixed_width","slug","appendChild","push","src","alt","Promise","reject","nbrResults","nbrResultsText","nbrResultElement","localStorage","favoritedGifId","key","favoritedGif","getElementById","classList","add","catch","console","log","error","preventDefault","favId","getAttribute","split","favImg","getElementsByClassName","favs","getItem","undefined","rmvGif","removeItem","remove","setItem","JSON","stringify","favItemId","objectGif","FavGifInfos","parse","favoritedGifBorder"],"mappings":"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","file":"giphyapp.map","sourcesContent":["alert('TOTO');","import './toto';\n\nconst giphyUrl = \"http://api.giphy.com/v1/gifs/search?q\";\nconst apikey = \"vw4usscjAkDQiPbUvnGdRJfpEUWqZsuY\";\n\nlet urlParams = new URLSearchParams(window.location.search);\nlet urlParam = urlParams.get(\"q\");\n\nlet formElement = document.querySelector(\"#form\");\nlet gifDisplay = document.querySelector(\".results\");\nlet favoritedBtn = document.querySelector(\".favoris\");\nlet gifInfos = [];\n\n//Loading\nwindow.onload = e => {\n  if (window.location.pathname === \"/favorited\") {\n    favorited();\n  } else {\n    if (urlParam) {\n      searching(urlParam, e);\n      formElement\n        .querySelector(\"input\")\n        .setAttribute(\"value\", urlParam);\n    }\n  }\n};\n\n//search\nformElement.addEventListener(\"submit\", e => {\n  let inputText = e.target[1].value;\n  history.pushState(null, \"\", \"/\");\n  searching(inputText, e);\n  if (urlParam != null) {\n    urlParams.set(\"q\", inputText);\n    window.location.search = `?q=${inputText}`;\n  } else {\n    window.location.href += `?q=${inputText}`;\n  }\n});\n\nsearching = (searchedText, e) => {\n  let url = `${giphyUrl}=${searchedText}&api_key=${apikey}`;\n  fetch(url)\n    .then(response => {\n      return response.json()\n    })\n    .then(data => {\n      if (data.data.length) {\n        while (gifDisplay.firstChild) {\n          gifDisplay.removeChild(gifDisplay.firstChild);\n        }\n        for (let i = 0; i < data.data.length; i++) {\n          let imageDiv = document.createElement(\"div\");\n          let image = document.createElement(\"img\");\n          let imageModal = document.createElement(\"div\");\n          let favButton = document.createElement(\"p\");\n          let favText = document.createTextNode(\"\");\n          let linkButton = document.createElement(\"a\");\n          let linkText = document.createTextNode(\"Link\");\n          linkButton.setAttribute(\"href\", data.data[i].url);\n          imageDiv.setAttribute(\"class\", \"imageContainer\");\n          imageDiv.setAttribute(\"id\", data.data[i].id);\n          imageModal.setAttribute(\"class\", \"imgModal\");\n          favButton.setAttribute(\"class\", `${data.data[i].id} favBtn`);\n          image.setAttribute(\"src\", data.data[i].images.fixed_width.url);\n          image.setAttribute(\"class\", data.data[i].id);\n          image.setAttribute(\"alt\", data.data[i].slug);\n          favButton.appendChild(favText);\n          linkButton.appendChild(linkText);\n          imageModal.appendChild(favButton);\n          imageModal.appendChild(linkButton);\n          imageDiv.appendChild(imageModal);\n          imageDiv.appendChild(image);\n          gifDisplay.appendChild(imageDiv);\n          gifInfos.push({\n            id: data.data[i].id,\n            href: data.data[i].url,\n            src: data.data[i].images.fixed_width.url,\n            alt: data.data[i].slug\n          });\n        }\n      } else {\n        return Promise.reject(\"Aucun resultat\");\n      }\n      let nbrResults = document.createElement(\"p\");\n      let nbrResultsText = document.createTextNode(\n        `${data.data.length} results`\n      );\n      nbrResults.appendChild(nbrResultsText);\n      let nbrResultElement = document.querySelector(\".nbrResults\");\n      nbrResultElement.appendChild(nbrResults);\n      if (localStorage.length > 0) {\n        for (let i = 0; i < localStorage.length; i++) {\n          let favoritedGifId = localStorage.key(i);\n          let favoritedGif = document.getElementById(favoritedGifId);\n          favoritedGif.querySelector('img').classList.add(\"favorited\");\n        }\n      }\n        \n    })\n    .catch(error => console.log(error));\n  e.preventDefault();\n};\n\n//Add to favorite\ngifDisplay.addEventListener(\"click\", e => {\n  let favId = e.target.getAttribute(\"class\").split(\" \")[0];\n  let favImg = document.getElementsByClassName(favId)[1];\n  let favs = localStorage.getItem(favId);\n  if (favId !== undefined) {\n    if (favs !== null) {\n      if (window.location.pathname === \"/favorited\") {\n        let rmvGif = document.getElementById(favId);\n        gifDisplay.removeChild(rmvGif);\n      }\n      localStorage.removeItem(favId);\n      favImg.classList.remove(\"favorited\");\n    } else {\n      for (let i = 0; i < gifInfos.length; i++) {\n        if (favId == gifInfos[i].id) {\n          localStorage.setItem(favId, JSON.stringify(gifInfos[i]));\n          favImg.classList.add(\"favorited\");\n        }\n      }\n    }\n  }\n});\n\nfavoritedBtn.addEventListener(\"click\", e => {\n  history.pushState(null, \"\", \"/favorited\");\n  while (gifDisplay.firstChild) {\n    gifDisplay.removeChild(gifDisplay.firstChild);\n  }\n  favorited();\n});\n\nfunction favorited() {\n  for (let i = 0; i < localStorage.length; i++) {\n    let favItemId = localStorage.key(i);\n    let objectGif = localStorage.getItem(favItemId);\n    let imageDiv = document.createElement(\"div\");\n    let image = document.createElement(\"img\");\n    let imageModal = document.createElement(\"div\");\n    let favButton = document.createElement(\"p\");\n    let favText = document.createTextNode(\"\");\n    let linkButton = document.createElement(\"a\");\n    let linkText = document.createTextNode(\"Link\");\n    let FavGifInfos = JSON.parse(objectGif);\n    linkButton.setAttribute(\"href\", FavGifInfos.href);\n    imageDiv.setAttribute(\"id\", FavGifInfos.id);\n    imageDiv.setAttribute(\"class\", \"imageContainer\");\n    imageModal.setAttribute(\"class\", \"imgModal\");\n    favButton.setAttribute(\"class\", `${favItemId} favBtn`);\n    image.setAttribute(\"src\", FavGifInfos.src);\n    image.setAttribute(\"class\", `${favItemId} favorited`);\n    image.setAttribute(\"alt\", FavGifInfos.alt);\n    favButton.appendChild(favText);\n    linkButton.appendChild(linkText);\n    imageModal.appendChild(favButton);\n    imageModal.appendChild(linkButton);\n    imageDiv.appendChild(imageModal);\n    imageDiv.appendChild(image);\n    gifDisplay.appendChild(imageDiv);\n  }\n}\n\nfunction favoritedGifBorder() {}\n"]}