{"version":3,"sources":["index.js"],"names":["giphyUrl","apikey","urlParams","URLSearchParams","window","location","search","urlParam","get","formElement","document","querySelector","gifDisplay","favoritedBtn","gifInfos","onload","pathname","favorited","searching","e","addEventListener","inputText","target","value","history","pushState","set","href","searchedText","url","fetch","then","response","json","data","length","firstChild","removeChild","i","imageDiv","createElement","image","imageModal","favButton","favText","createTextNode","linkButton","linkText","setAttribute","id","images","fixed_width","slug","appendChild","push","src","alt","nbrResults","nbrResultElement","console","log","catch","error","preventDefault","favId","getAttribute","favImg","getElementsByClassName","favUrl","favs","localStorage","getItem","undefined","rmvGif","getElementById","removeItem","classList","remove","setItem","JSON","stringify","add","favItemId","key","objectGif","FavGifInfos","parse"],"mappings":"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","file":"giphyapp.map","sourcesContent":["const giphyUrl = \"http://api.giphy.com/v1/gifs/search?q\";\nconst apikey = \"vw4usscjAkDQiPbUvnGdRJfpEUWqZsuY\";\n\nlet urlParams = new URLSearchParams(window.location.search);\nlet urlParam = urlParams.get(\"q\");\n\nlet formElement = document.querySelector(\"#form\");\nlet gifDisplay = document.querySelector(\".results\");\nlet favoritedBtn = document.querySelector(\".favoris\");\nlet gifInfos = [];\n\n//Loading\nwindow.onload = e => {\n  if (window.location.pathname == \"/favorited\") {\n    favorited();\n  }\n  if (urlParam) {\n    searching(urlParam, e);\n  }\n};\n\n//search\nformElement.addEventListener(\"submit\", e => {\n  let inputText = e.target[1].value;\n  history.pushState(null, '', '/');\n  searching(inputText, e);\n  if (urlParam != null) {\n    urlParams.set(\"q\", inputText);\n    window.location.search = `?q=${inputText}`;\n  } else {\n    window.location.href += `?q=${inputText}`;\n  }\n});\n\nsearching = (searchedText, e) => {\n  let url = `${giphyUrl}=${searchedText}&api_key=${apikey}`;\n  fetch(url)\n    .then(response => {\n      response.json().then(data => {\n        if (data.data.length) {\n          while (gifDisplay.firstChild) {\n            gifDisplay.removeChild(gifDisplay.firstChild);\n          }\n          for (let i = 0; i < data.data.length; i++) {\n            let imageDiv = document.createElement(\"div\");\n            let image = document.createElement(\"img\");\n            let imageModal = document.createElement(\"div\");\n            let favButton = document.createElement(\"p\");\n            let favText = document.createTextNode(\"fav\");\n            let linkButton = document.createElement(\"a\");\n            let linkText = document.createTextNode(\"Link\");\n            linkButton.setAttribute(\"href\", data.data[i].url);\n            imageDiv.setAttribute(\"class\", \"imageContainer\");\n            imageDiv.setAttribute(\"id\", data.data[i].id);\n            imageModal.setAttribute(\"class\", \"imgModal\");\n            favButton.setAttribute(\"class\", data.data[i].id);\n            image.setAttribute(\"src\", data.data[i].images.fixed_width.url);\n            image.setAttribute(\"class\", data.data[i].id);\n            image.setAttribute(\"alt\", data.data[i].slug);\n            favButton.appendChild(favText);\n            linkButton.appendChild(linkText);\n            imageModal.appendChild(favButton);\n            imageModal.appendChild(linkButton);\n            imageDiv.appendChild(imageModal);\n            imageDiv.appendChild(image);\n            gifDisplay.appendChild(imageDiv);\n            gifInfos.push({\n              id: data.data[i].id,\n              href: data.data[i].url,\n              src: data.data[i].images.fixed_width.url,\n              alt: data.data[i].slug\n            });\n          }\n          let nbrResults = document.createElement('p').createTextNode(`${data.data.length} results`);\n          let nbrResultElement = document.querySelector(\".nbrResults\");\n          nbrResultElement.appendChild(nbrResults);\n        } else {\n          console.log(\"Aucun resultat\");\n        }\n      });\n    })\n    .catch(error => console.log(error));\n  e.preventDefault();\n};\n\n//Add to favorite\ngifDisplay.addEventListener(\"click\", e => {\n  let favId = e.target.getAttribute(\"class\");\n  let favImg = document.getElementsByClassName(favId)[1]\n  let favUrl = document.getElementsByClassName(favId)[0].getAttribute(\"src\");\n  let favs = localStorage.getItem(favId);\n  if (favId !== undefined) {\n    if (favs !== null) {\n      if (window.location.pathname === \"/favorited\") {\n        let rmvGif = document.getElementById(favId);\n        gifDisplay.removeChild(rmvGif);\n      }\n      localStorage.removeItem(favId);\n      favImg.classList.remove(\"favorited\");\n    } else {\n      for (let i = 0; i < gifInfos.length; i++) {\n        if (favId == gifInfos[i].id) {\n          localStorage.setItem(favId, JSON.stringify(gifInfos[i]));\n          favImg.classList.add(\"favorited\");\n        }\n      }\n    }\n  }\n});\n\nfavoritedBtn.addEventListener(\"click\", e => {\n  history.pushState(null, '', '/favorited');\n  while (gifDisplay.firstChild) {\n    gifDisplay.removeChild(gifDisplay.firstChild);\n  }\n  favorited();\n});\n\nfunction favorited() {\n  for (let i = 0; i < localStorage.length; i++) {\n    let favItemId = localStorage.key(i);\n    let objectGif = localStorage.getItem(favItemId);\n    let imageDiv = document.createElement(\"div\");\n    let image = document.createElement(\"img\");\n    let imageModal = document.createElement(\"div\");\n    let favButton = document.createElement(\"p\");\n    let favText = document.createTextNode(\"fav\");\n    let linkButton = document.createElement(\"a\");\n    let linkText = document.createTextNode(\"Link\");\n    let FavGifInfos = JSON.parse(objectGif);\n    linkButton.setAttribute(\"href\", FavGifInfos.href);\n    imageDiv.setAttribute(\"id\", FavGifInfos.id);\n    imageDiv.setAttribute(\"class\", \"imageContainer\");\n    imageModal.setAttribute(\"class\", \"imgModal\");\n    favButton.setAttribute(\"class\", favItemId);\n    image.setAttribute(\"src\", FavGifInfos.src);\n    image.setAttribute(\"class\", `${favItemId} favorited`);\n    image.setAttribute(\"alt\", FavGifInfos.alt);\n    favButton.appendChild(favText);\n    linkButton.appendChild(linkText);\n    imageModal.appendChild(favButton);\n    imageModal.appendChild(linkButton);\n    imageDiv.appendChild(imageModal);\n    imageDiv.appendChild(image);\n    gifDisplay.appendChild(imageDiv);\n  }\n}\n"]}